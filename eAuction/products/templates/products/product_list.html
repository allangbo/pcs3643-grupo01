{% extends 'theme/base.html' %}
{% load auth_extras %}

{% block title %} Produtos {% endblock %}
{% block content %}

<h2 class="center-text">Produtos</h2>

{% if request.user|has_group:"seller-buyer" or  request.user|has_group:"admin" or request.user.is_superuser %}
<div class="add-button">
    <button onclick="window.location.href='{%url 'products:product_new' %}'">Adicionar</button>
</div>
{% endif %}
<table class="table-list">
    <thead>
        <tr>
            <th>ID</th>
            <th>Nome</th>
            <th>Descrição</th>
            {% if request.user|has_group:"seller-buyer" or  request.user|has_group:"admin" or request.user.is_superuser %}
            <th>Ações</th>
            {% endif %}
        </tr>
    </thead>    
    <tbody>
        {% if product_list %}
            {% for product in product_list %}
                <tr>
                    <td>
                        {{ product.id }}
                    </td>
                    <td>
                        {{ product.name }}
                    </td>
                    <td>
                        {{ product.description|default_if_none:'' }}
                    </td>
                    {% if request.user|has_group:"seller-buyer" or  request.user|has_group:"admin" or request.user.is_superuser %}
                        <td>                            
                            <button onclick="confirmDelete('{%url 'products:product_delete' product.id %}')">Deletar</button>
                            <button onclick="window.location.href='{%url 'products:product_edit' product.id %}'">Editar</button>                            
                        </td> 
                    {% endif %}  
                </tr>      
            {% endfor %}
        {% else %}
            <tr>
                <td class="center-text" colspan='100%'><p>Nenhum produto disponível.</p></td> 
            </tr>
        {% endif %}
    </tbody>
    
</table>
{% endblock content %}



